template(name='nav')
    span
        if is_loading
            .ui.circular.button
                i.large.loading.yin.yang.icon
        else 
            a.icon.large.ui.circular.button(href='/') 
                i.yin.yang.icon
                //- img.ui.tiny.compact.inline.image(src="{{c.url 'mmm_logo_small' height=200 }}" title='Home')
        unless currentUser
            a.ui.circular.button(href='/login') 
                i.sign.in.grey.icon
                //- |log In
            a.ui.circular.button(href='/register')
                i.user.plus.grey.icon
                //- |sign up
        if currentUser
            a.icon.ui.circular.button.add_doc
                i.plus.icon
            //- if is_dev
            //-     a.icon.ui.circular.button.set_models(href="/m/model")
            //-         i.grey.database.icon
            unless logging_out
                a.ui.circular.button(href="/user/#{currentUser.username}" class=user_nav_button_class)
                    if currentUser.profile_image_id
                        img.ui.avatar.inline.image(src="{{c.url currentUser.profile_image_id width=100 height=100 gravity='face' crop='fill'}}")
                    else
                        i.user.outline.icon
                    span.mobile.hidden #{currentUser.name} 
                a#logout.ui.circular.icon.button(href='#' title='log out')
                    //- |log out
                    i.sign.out.grey.icon
            if logging_out
                .ui.circular.icon.button
                    i.loading.circle.notch.icon
